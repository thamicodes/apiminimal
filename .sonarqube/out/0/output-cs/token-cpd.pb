¿l
 C:\apiminimal\TodoApi\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddDbContext 
< 
TarefaDb &
>& '
(' (
opt( +
=>, .
opt/ 2
.2 3
UseInMemoryDatabase3 F
(F G
$strG Q
)Q R
)R S
;S T
builder 
. 
Services 
. 3
'AddDatabaseDeveloperPageExceptionFilter 8
(8 9
)9 :
;: ;
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder		 
.		 
Services		 
.		 
AddSwaggerGen		 
(		 
)		  
;		  !
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
MapGet 

(
 
$str 
, 
( 
TarefaDb 
db 
) 
=>  
{ 
var 	
lista
 
= 
new 
List 
< 
Tarefa !
>! "
{" #
new 
Tarefa 

{ 
Nome 
= 
$str #
,# $
FoiConcluida% 1
=2 3
true4 8
}9 :
,: ;
new 
Tarefa 

{ 
Nome 
= 
$str ;
,; <
FoiConcluida= I
=J K
falseL Q
}R S
,S T
new 
Tarefa 

{ 
Nome 
= 
$str '
,' (
FoiConcluida) 5
=6 7
false8 =
}> ?
,? @
new 
Tarefa 

{ 
Nome 
= 
$str ,
,, -
FoiConcluida. :
=; <
true= A
}B C
}C D
;D E
db 

.
 
Tarefas 
. 
AddRange 
( 
lista !
)! "
;" #
db 

.
 
SaveChanges 
( 
) 
; 
return 

Results 
. 
Ok 
( 
) 
; 
}   
)   
;   
app"" 
."" 
MapGet"" 

(""
 
$str"" 
,"" 
("" 
)"" 
=>"" 
new"" 
DateTime"" &
(""& '
)""' (
)""( )
;"") *
app$$ 
.$$ 
MapGet$$ 

($$
 
$str$$ 
,$$ 
async$$ 
($$ 
TarefaDb$$ &
db$$' )
)$$) *
=>$$+ -
await%% 	
db%%
 
.%% 
Tarefas%% 
.%% 
ToListAsync%%  
(%%  !
)%%! "
)%%" #
;%%# $
app'' 
.'' 
MapGet'' 

(''
 
$str''  
,''  !
async''" '
(''( )
TarefaDb'') 1
db''2 4
)''4 5
=>''6 8
await(( 	
db((
 
.(( 
Tarefas(( 
.(( 
Where(( 
((( 
t(( 
=>(( 
t((  !
.((! "
FoiConcluida((" .
)((. /
.((/ 0
ToListAsync((0 ;
(((; <
)((< =
)((= >
;((> ?
app** 
.** 
MapGet** 

(**
 
$str** $
,**$ %
async**& +
(**, -
TarefaDb**- 5
db**6 8
)**8 9
=>**: <
await++ 	
db++
 
.++ 
Tarefas++ 
.++ 
Where++ 
(++ 
t++ 
=>++ 
!++  !
t++! "
.++" #
FoiConcluida++# /
)++/ 0
.++0 1
ToListAsync++1 <
(++< =
)++= >
)++> ?
;++? @
app-- 
.-- 
MapGet-- 

(--
 
$str-- 
,-- 
async--  
(--! "
int--" %
id--& (
,--( )
TarefaDb--* 2
db--3 5
)--5 6
=>--7 9
await.. 	
db..
 
... 
Tarefas.. 
... 
	FindAsync.. 
(.. 
id.. !
)..! "
is// 

Tarefa// 
todo// 
?00 
Results00 
.00 
Ok00 
(00 
todo00 
)00 
:22 
Results22 
.22 
	NoContent22 
(22 
)22  
)22  !
;22! "
app44 
.44 
MapGet44 

(44
 
$str44 $
,44$ %
async44& +
(44, -
string44- 3
nome444 8
,448 9
TarefaDb44: B
db44C E
)44E F
=>44G I
await55 
db55 
.55 	
Tarefas55	 
.55 
Where55 
(55 
t55 
=>55 
t55 
.55 
Nome55 "
==55# %
nome55& *
)55* +
.55+ ,
ToListAsync55, 7
(557 8
)558 9
is66 
List66 
<66 
Tarefa66 
>66 
todos66 
?77 
Results77 	
.77	 

Ok77
 
(77 
todos77 
)77 
:99 
Results99 	
.99	 

	NoContent99
 
(99 
)99 
)99 
;99 
app;; 
.;; 
MapPost;; 
(;; 
$str;; 
,;; 
async;; 
(;; 
Tarefa;; %
tarefa;;& ,
,;;, -
TarefaDb;;. 6
db;;7 9
);;9 :
=>;;; =
{<< 
if== 
(== 
!== 	
tarefa==	 
.== 
IsValid== 
(== 
)== 
)== 
return>> 
Results>> 
.>> 
UnprocessableEntity>> *
(>>* +
)>>+ ,
;>>, -
db@@ 
.@@ 
Tarefas@@ 
.@@ 
Add@@ 
(@@ 
tarefa@@ 
)@@ 
;@@ 
awaitAA 	
dbAA
 
.AA 
SaveChangesAsyncAA 
(AA 
)AA 
;AA  
returnCC 

ResultsCC 
.CC 
CreatedCC 
(CC 
$"CC 
$strCC &
{CC& '
tarefaCC' -
.CC- .
IdCC. 0
}CC0 1
"CC1 2
,CC2 3
tarefaCC4 :
)CC: ;
;CC; <
}DD 
)DD 
;DD 
appGG 
.GG 
MapPutGG 

(GG
 
$strGG 
,GG 
asyncGG !
(GG" #
intGG# &
idGG' )
,GG) *
TarefaGG+ 1
tarefaAlteradaGG2 @
,GG@ A
TarefaDbGGB J
dbGGK M
)GGM N
=>GGO Q
{HH 
ifII 
(II 
!II 	
tarefaAlteradaII	 
.II 
IsValidII 
(II  
)II  !
)II! "
returnJJ 
ResultsJJ 
.JJ 
UnprocessableEntityJJ *
(JJ* +
)JJ+ ,
;JJ, -
varLL 
tarefaLL 
=LL 
awaitLL 
dbLL 
.LL 
TarefasLL !
.LL! "
	FindAsyncLL" +
(LL+ ,
idLL, .
)LL. /
;LL/ 0
ifOO 
(OO 
tarefaOO 
isOO 
nullOO 
)OO 
returnOO 
ResultsOO &
.OO& '
	NoContentOO' 0
(OO0 1
)OO1 2
;OO2 3
tarefaQQ 

.QQ
 
NomeQQ 
=QQ 
tarefaAlteradaQQ  
.QQ  !
NomeQQ! %
;QQ% &
tarefaRR 

.RR
 
FoiConcluidaRR 
=RR 
tarefaAlteradaRR (
.RR( )
FoiConcluidaRR) 5
;RR5 6
awaitTT 	
dbTT
 
.TT 
SaveChangesAsyncTT 
(TT 
)TT 
;TT  
returnVV 

ResultsVV 
.VV 
	NoContentVV 
(VV 
)VV 
;VV 
}WW 
)WW 
;WW 
appYY 
.YY 
	MapDeleteYY 
(YY 
$strYY 
,YY 
asyncYY $
(YY% &
intYY& )
idYY* ,
,YY, -
TarefaDbYY. 6
dbYY7 9
)YY9 :
=>YY; =
{ZZ 
if[[ 
([[ 
await[[ 
db[[ 
.[[ 
Tarefas[[ 
.[[ 
	FindAsync[[ "
([[" #
id[[# %
)[[% &
is[[' )
Tarefa[[* 0
tarefa[[1 7
)[[7 8
{\\ 
db]] 

.]]
 
Tarefas]] 
.]] 
Remove]] 
(]] 
tarefa]]  
)]]  !
;]]! "
await^^ 
db^^ 
.^^ 
SaveChangesAsync^^ !
(^^! "
)^^" #
;^^# $
return__ 
Results__ 
.__ 
Ok__ 
(__ 
tarefa__  
)__  !
;__! "
}`` 
returnbb 

Resultsbb 
.bb 
NotFoundbb 
(bb 
)bb 
;bb 
}dd 
)dd 
;dd 
appgg 
.gg 
Rungg 
(gg 
)gg 	
;gg	 

classii 
Tarefaii 
{jj 
publickk 

intkk 
Idkk 
{kk 
getkk 
;kk 
setkk 
;kk 
}kk 
publicll 

stringll 
Nomell 
{ll 
getll 
;ll 
setll !
;ll! "
}ll# $
publicmm 

boolmm 
FoiConcluidamm 
{mm 
getmm "
;mm" #
setmm$ '
;mm' (
}mm) *
publicnn 

boolnn 
IsValidnn 
(nn 
)nn 
{oo 
ifpp 

(pp 
!pp 
stringpp 
.pp 
IsNullOrEmptypp !
(pp! "
Nomepp" &
)pp& '
)pp' (
returnqq 
trueqq 
;qq 
returnss 
falsess 
;ss 
}tt 
}uu 
classxx 
TarefaDbxx 
:xx 
	DbContextxx 
{yy 
publiczz 

TarefaDbzz 
(zz 
DbContextOptionszz $
<zz$ %
TarefaDbzz% -
>zz- .
optionszz/ 6
)zz6 7
:{{ 	
base{{
 
({{ 
options{{ 
){{ 
{|| 
}
ÅÅ 
public
ÉÉ 

DbSet
ÉÉ 
<
ÉÉ 
Tarefa
ÉÉ 
>
ÉÉ 
Tarefas
ÉÉ  
=>
ÉÉ! #
Set
ÉÉ$ '
<
ÉÉ' (
Tarefa
ÉÉ( .
>
ÉÉ. /
(
ÉÉ/ 0
)
ÉÉ0 1
;
ÉÉ1 2
}åå 
staticçç 
class
çç 
teste
çç 
{éé 
public
èè 

static
èè 
void
èè 
AddTestData
èè "
(
èè" #
TarefaDb
èè# +
context
èè, 3
)
èè3 4
{
êê 
var
ìì 
lista
ìì 
=
ìì 
new
ìì 
List
ìì 
<
ìì 
Tarefa
ìì #
>
ìì# $
{
ìì$ %
newîî 
Tarefa
îî 

{
îî 
Nome
îî 
=
îî 
$str
îî #
,
îî# $
FoiConcluida
îî% 1
=
îî2 3
true
îî4 8
}
îî9 :
,
îî: ;
newïï 
Tarefa
ïï 

{
ïï 
Nome
ïï 
=
ïï 
$str
ïï ;
,
ïï; <
FoiConcluida
ïï= I
=
ïïJ K
false
ïïL Q
}
ïïR S
,
ïïS T
newññ 
Tarefa
ññ 

{
ññ 
Nome
ññ 
=
ññ 
$str
ññ '
,
ññ' (
FoiConcluida
ññ) 5
=
ññ6 7
false
ññ8 =
}
ññ> ?
,
ññ? @
newóó 
Tarefa
óó 

{
óó 
Nome
óó 
=
óó 
$str
óó ,
,
óó, -
FoiConcluida
óó. :
=
óó; <
true
óó= A
}
óóB C
}
óóC D
;
óóD E
context
òò 
.
òò 
Tarefas
òò 
.
òò 
AddRange
òò  
(
òò  !
lista
òò! &
)
òò& '
;
òò' (
context
öö 
.
öö 
SaveChanges
öö 
(
öö 
)
öö 
;
öö 
}
õõ 
}úú 